<!doctype html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=1024" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>杭州疾控系统实验室信息交流平台的研究</title>
  <meta name="description" content="a project presentation" />
  <meta name="author" content="Mark Renton" />
  <link href="css/prettify.css" rel="stylesheet" />
  <link href="css/impress-demo.css" rel="stylesheet" />
  <link href="css/custom.css" rel="stylesheet" />
  <link href="css/font-awesome.min.css" rel="stylesheet" />
  <link href="css/animate.min.css" rel="stylesheet" />

  <link rel="shortcut icon" href="img/favicon.png" />
  <link rel="apple-touch-icon" href="img/apple-touch-icon.png" />
  <script src="js/jquery.min.js"></script>
  <script src="js/highcharts.js"></script>
  <script src="js/d3.v3.min.js"></script>
  <script src="js/prettify/prettify.js"></script>
</head>

<body class="impress-not-supported" onload="prettyPrint()">
<div class="fallback-message">
  <!-- Warning if old browser -->
  <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
  <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<div id="impress">
  <!-- Title of presentation -->
  <div id="title" class="step hidden" data-x="-9000" data-y="-5000" data-scale="1">
    <p>杭州疾控系统实验室</p>
    <p>信息交流平台的研究</p>
    <span class="company">杭州市疾病预防控制中心微检科</span>
    <span class="author">俞骅 2013-11-27</span>
  </div>

  <!-- What -->
  <div id="what0" class="step" data-x="-5000" data-y="-5000" data-scale="200">
    <p class="huge">WHAT WE DO?</p>
  </div>

  <div id="what1" class="step slide" data-x="50000" data-y="-15000" data-scale="2">
    <p class="middle">Browser/Server构架信息平台</p>
    <div class="content">
      <p class="small" style="text-align: left">服务对象：疾控实验室</p>
      <p class="small" style="text-align: left">研究方式：程序开发和部署</p>
    </div>
  </div>

  <div id="what2" class="step slide" data-x="50000" data-y="-13500" data-scale="2">
    <p class="middle">平台特点</p>
    <div class="content">
      <p class="small" style="text-align: left">松耦合，可扩展</p>
      <p class="small" style="text-align: left">跨平台，可支持移动终端</p>
      <p class="small" style="text-align: left">支持第三方社交应用</p>
      <p class="small" style="text-align: left">开源程序</p>
      <p class="small" style="text-align: left">多语言支持</p>
    </div>
  </div>

  <div id="what3" class="step hidden" data-x="-5000" data-y="-5000" data-scale="200">
    <p class="huge" style="padding-right:61px">WHAT WE DO</p>
    <p style="margin-top: -60px" class="small">A Web Based Comunication & Applications System for CDC Labs</p>
  </div>

  <!-- Why -->
  <div id="why" class="step" data-x="-5000" data-y="200000" data-scale="300">
    <p class="huge">WHY WE DO?</p>
  </div>
  <div id="why1" class="step" data-x="400000" data-y="200000" data-rotate-y="90" data-scale="300">
    <p class="middle">改善疾控实验室之间<br />信息交流和共享渠道</p>
  </div>
  <div id="why2" class="step" data-x="400000" data-y="350000" data-rotate-y="90" data-scale="350">
    <p class="middle">为网络实验室提供数据平台</p>
  </div>
  <div id="why3" class="step" data-x="400000" data-y="500000" data-rotate-y="90" data-scale="400">
    <p class="middle">为研究工作提供技术支撑</p>
  </div>

  <!-- How -->
  <div id="how" class="step" data-x="-5000" data-y="500000" data-scale="400">
    <p class="huge">HOW WE DO?</p>
  </div>

  <div id="how1" class="step" data-x="40000" data-y="496000" data-scale="1">
    <p class="huge">提出设想</p>
    <div style="padding-left:300px; position"><i class="fa fa-arrow-down" style="font-size:5em;"></i></div>
  </div>
  <div id="how2" class="step" data-x="40000" data-y="496500" data-scale="1">
    <p class="huge">开发程序</p>
    <div style="padding-left:300px; position"><i class="fa fa-arrow-down" style="font-size:5em;"></i></div>
  </div>
  <div id="how3" class="step" data-x="40000" data-y="497000" data-scale="1">
    <p class="huge">功能测试</p>
    <div style="padding-left:300px; position"><i class="fa fa-arrow-down" style="font-size:5em;"></i></div>
  </div>
  <div id="how4" class="step" data-x="40000" data-y="497350" data-scale="1">
    <p class="huge">评估应用</p>
  </div>
  <div id="how5" class="step hidden" data-x="41200" data-y="496360" data-scale="5">
    <div style="border: dashed 5px">
    <p class="big">应用程序</p>
    <p style="margin-top:-100px; margin-left: 300px">
      <span class="huge" style="font-size:330px;">}</span>
      <span style="float: left; margin: -260px 0px 0px 160px">整合至平台</span>
    </p>
    </div>
  </div>
  <div id="how6" class="step hidden" data-x="41200" data-y="499500" data-scale="16">
    <div style="border: dashed 5px"><img src="img/app.png" /></div>
  </div>
  <div id="how7" class="step" data-x="41200" data-y="510500" data-scale="16">
    <p class="middle">项目开发时间表</p>
    <div>2009.12 - 2010.06: 查询资料，初步选择平台开发方案和工具，测试并选择
    程序应用依赖库，初步建立框架核心，在Github.com网站建立源代码库</div>
  </div>
  <div id="how8" class="step" data-x="41200" data-y="518500" data-rotate-x="-10" data-scale="15">
    <div>2009.12 - 2010.06: 查询资料，初步选择平台开发方案和工具，测试并选择
    程序应用依赖库，初步建立框架核心，在Github.com网站建立源代码库</div>
  </div>
  <div id="how9" class="step" data-x="41200" data-y="525500" data-rotate-x="-20" data-scale="14">
    <div>2010.06 - 2011.06: 开发平台核心层程序构架，建立可扩展的用户模型，可
    填充各种内容媒体和应用程序的页面树形结构和相应的权限机制，形成平台核心构架</div>
  </div>
  <div id="how10" class="step" data-x="41200" data-y="532500" data-rotate-x="-30" data-scale="13">
    <div>2011.06 - 2011.09: 开发收藏，短信等功能的通用组件，设计并建立平台
    信息交流基础应用程序，开发知识库应用程序。开发男性同性恋HIV病毒监测预约登记程序</div>
  </div>
  <div id="how11" class="step" data-x="41200" data-y="540500" data-rotate-x="-40" data-scale="12">
    <div>2011.09 - 2012.06: 建立区县微生物检验实验室盲样考核应用程序，上送
    菌株鉴定反馈应用程序。初步建立区域化的病原菌MLST数据库平台，建立基于互
    联网的Entrez数据自动跟踪应用程序</div>
  </div>
  <div id="how12" class="step" data-x="41200" data-y="550500" data-rotate-x="-50" data-scale="11">
    <div>2012.06 - 2012.09: 添加基于Oauth2和OpenID技术的用户登录功能，用户层接口
    与galaxy project的用户层进行对接。在dotcloud，heroku和appfog云平台部署测试</div>
  </div>
  <div id="how13" class="step" data-x="41200" data-y="558500" data-rotate-x="-60" data-scale="10">
    <div>2012.09 - 2013.09: 在虚拟服务器VPS部署与测试，对VPS部署的应用程序
    进行性能优化，撰写相关论文与总结报告</div>
  </div>


  <!-- Introduction -->
  <div id="intro" class="step" data-x="60000" data-y="560000" data-scale="10">
    <p class="big">技术介绍</p>
  </div>
  <div id="tech" class="step" data-x="60000" data-y="570000" data-scale="10">
    <p class="big">前端和后端技术</p>
  </div>
  <div id="backend" class="step animar" data-x="70000" data-y="570000" data-scale="10">
    <p class="font tech-size">BACKENDS <span class="salmon"><i class="fa fa-cogs"></i></span></p>
    <ul class="text-center ">
      <li class="clip img-circle">
        <img src="img/python.png" class="compass" />
        <span class="title_sub_tech">Python</span>
      </li>
      <li class="clip img-circle">
        <img src="img/pony.png" class="compass" />
        <span class="title_sub_tech">Django</span>
      </li>
      <li class="clip img-circle">
        <img src="img/gunicorn.png" class="compass" />
        <span class="title_sub_tech">Gunicorn</span>
      </li>
      <li class="clip img-circle">
        <img src="img/nginx.png" class="compass" />
        <span class="title_sub_tech">Nginx</span>
      </li>
      <li class="clip img-circle">
        <img src="img/nodejs.png" class="compass"/>
        <span class="title_sub_tech">Node.js</span>
      </li>
      <li class="clip img-circle">
        <img src="img/mysql.png" class="compass" />
        <span class="title_sub_tech">MySQL</span>
      </li>
      <li class="clip img-circle big_one">
        <img src="img/postgresql.png" class="compass"/>
        <span class="title_sub_tech">PostgreSQL</span>
      </li>
      <li class="clip img-circle">
        <img src="img/redis.png" class="compass" />
        <span class="title_sub_tech">Redis</span>
      </li>
      <li class="clip img-circle">
        <img src="img/celery.png" class="compass" />
        <span class="title_sub_tech">Celery</span>
      </li>
      <li class="clip img-circle">
        <img src="img/memcached.png" class="compass" />
        <span class="title_sub_tech">Memcached</span>
      </li>
      <li class="clip img-circle big_one">
        <img src="img/sphinx.png" class="compass" />
        <span class="title_sub_tech">Sphinx</span>
      </li>
    </ul>
  </div>

  <div id="frontend" class="step animar" data-x="80000" data-y="570000" data-scale="10">
    <p class="font tech-size">FRONTEND <span class="salmon"><i class="fa fa-desktop"></i></span></p>
    <ul class="text-center ">
      <li class="clip img-circle">
        <i class="fa fa-css3"></i>
        <span class="title_sub_tech">CSS3</span>
      </li>
      <li class="clip img-circle">
        <i class="fa fa-github"></i>
        <span class="title_sub_tech">Github</span>
      </li>
      <li class="clip img-circle">
        <i class="fa fa-bitbucket"></i>
        <span class="title_sub_tech">Bitbucket</span>
      </li>
      <li class="clip img-circle">
        <i class="fa fa-twitter"></i>
        <span class="title_sub_tech">Bootstrap</span>
      </li>
      <li class="clip img-circle">
        <i class="fa fa-html5"></i>
        <span class="title_sub_tech">HTML5</span>
      </li>
      <li class="clip img-circle">
        <img src="img/jquery.png" class="compass" />
        <span class="title_sub_tech">JQuery</span>
      </li>
      <li class="clip img-circle">
        <i class="fa fa-rss"></i>
        <span class="title_sub_tech">RSS Feed</span>
      </li>
      <li class="clip img-circle">
        <i class="fa fa-comments"></i>
        <span class="title_sub_tech">DISQUS</span>
      </li>
      <li class="clip img-circle">
        <img src="img/less.png" class="compass" />
        <span class="title_sub_tech">Less</span>
      </li>
      <li class="clip img-circle">
        <i class="fa fa-tablet"></i>
        <span class="title_sub_tech">Responsive</span>
      </li>
      <li class="clear"></li>
    </ul>
  </div>

  <div id="core" class="step" data-x="80000" data-y="580000" data-scale="10">
    <p class="big">核心层介绍</p>
    <p class="small">用户层+页面层+权限机制</p>
  </div>
  <div id="core1" class="step slide" data-x="70000" data-y="580000" data-scale="10">
    <p class="middle">用户层</p>
    <img style="padding: 50px 0px 0px 50px;" src="img/auth.png" width="75%" height="75%" />
    <p style="text-align: center">用户程序数据结构</p>
  </div>
  <div id="core2" class="step slide" data-x="60000" data-y="580000" data-scale="10">
    <p class="middle">用户扩展</p>
    <br />
    <p>project/settings.py</p>
    <pre class="prettyprint lang-python" style="border: 0px;">
GAUTH_USER_EXTENSIONS = (
    # 添加第三方应用的用户插件
    'gauth.extensions.avatar',
    'gauth.extensions.portfolio',
    'ask.extensions.question',
)
    </pre>
    <p>运行south更新数据表</p>
    <pre class="prettyprint lang-shell" style="border: 0px;">
$ python manage.py schemamigration gauth --auto
$ python manage.py migrate gauth
    </pre>
  </div>

  <div id="core3" class="step slide" data-x="50000" data-y="580000" data-scale="10">
    <p class="middle">页面扩展</p>
    <br />
    <p>gbase/models.py</p>
    <pre class="prettyprint lang-python" style="border: 0px;">
from cms.module.page.models import Page

Page.register_extensions(
    # 添加页面插件
    'cms.module.extensions.datepublisher',
    'cms.module.extensions.changedate',
    'cms.module.page.extensions.navigation',
    ...
)
    </pre>
  </div>
  <div id="core4" class="step slide" data-x="40000" data-y="580000" data-scale="10">
    <p class="middle">树型目录组织页面</p>
    <br />
    <img style="padding: 0px 40px" src="img/tree.png" width="700px" height="585px" />
  </div>
  <div id="core5" class="step slide" data-x="30000" data-y="580000" data-scale="10">
    <p class="middle">定义权限机制</p>
    <br />
    <pre class="prettyprint lang-python" style="border: 0px;">
from permission import registry
from permission import PermissionHandler
from app.models import YourModel

class YourModelPermissionHandler(PermissionHandler):
    """权限处理器 """
    def has_perm(self, user_obj, perm, obj=None):
        if user_obj.is_authenticated():
            if perm == 'app.add_model':
                return True
            elif obj and obj.author == user_obj:
                return True

        return False

registry.register(YourModel, YourModelPermissionHandler)
</pre>
  </div>

  <div id="core6" class="step slide" data-x="20000" data-y="580000" data-scale="10">
    <img src="img/admin1.png" style="padding-left:60px" />
  </div>
  <div id="core7" class="step slide" data-x="10000" data-y="580000" data-scale="10">
    <img src="img/admin2.png" style="margin-left:-10px" />
  </div>
  <div id="core8" class="step slide" data-x="0" data-y="580000" data-scale="10">
    <p class="middle">其他通用组件</p>
    <br /><br />
    <p>1. rate 组件</p><br />
    <p>2. comment 组件</p><br />
    <p>3. message 组件</p><br />
    <p>4. chart 组件</p><br />
    <p>...</p><br />
  </div>

  <div id="app" class="step" data-x="0" data-y="590000" data-scale="10">
    <p class="big">应用程序介绍</p>
  </div>
  <div id="app1" class="step" data-x="10000" data-y="590000" data-scale="10">
    <span>内容发布</span>
    <div style="color:#444">文章管理系统，具有类似页面程序的可扩展性特性，避免了页面过多构建树形目录时对数据库的大量消耗的，主要用来发布新闻或事件，在实验室管理中传达信息。</div>
  </div>
  <div id="app1pic" class="step" data-x="10000" data-y="595000" data-scale="10">
    <img src="img/app1.png" />
  </div>

  <div id="app2" class="step" data-x="20000" data-y="590000" data-scale="10">
    <span>知识库</span>
    <div style="color:#444">功能类似维基百科的内容类应用程序。通过维基类应用程序，将疾控工作中总结的知识点整理成资料库的形式，方便查阅。</div>
  </div>
  <div id="app2pic" class="step" data-x="20000" data-y="595000" data-scale="10">
    <img src="img/app2.png" />
  </div>

  <div id="app3" class="step" data-x="30000" data-y="590000" data-scale="10">
    <span>问答</span>
    <div style="color:#444">用户可以发帖提问，在答案中用户可以根据有用程度进行排序，从而获得最佳答案。通过此应用程序，可以为区县各个疾控实验室明确所需开展的工作，解答工作中遇到的问题，反馈各个实验室提出的意见和建议；</div>
  </div>

  <div id="app4" class="step" data-x="40000" data-y="590000" data-scale="10">
    <span>Entrez Follow</span>
    <div style="color:#444">在信息平台构建检索条件，由服务器自动定期在NCBI数据库内进行检索，并在信息平台上反馈检索结果给用户。同时提供收藏和与他人分享记录的功能，方便研究团队共享数据；</div>
  </div>
  <div id="app4pic" class="step" data-x="40000" data-y="595000" data-scale="10">
    <img src="img/app4.png" />
  </div>

  <div id="app5" class="step" data-x="50000" data-y="590000" data-scale="10">
    <span>MLST区域数据库</span>
    <div style="color:#444">建立杭州地区的病原菌分子分型指纹库，方便各个实验室查询和溯源。</div>
  </div>

<div id="deploy" class="step slide" data-x="150000" data-y="50000" data-scale="20">
  <p class="middle">平台部署</p>
  <br /><br />
  <p>基于PaaS的云平台：Heroku, dotcloud, appfog</p>
  <img src="img/paas.png" />
  <p>基于Linux系统的虚拟服务器Virtual Private Server</p>
  <img src="img/vps.png" />
</div>
<div id="heroku1" class="step slide" data-x="170000" data-y="50000" data-scale="20">
  <p class="middle">Heroku部署</p>
  <br />
  <pre class="prettyprint lang-shell" style="border: 0px;">
1. 建立虚拟python环境，安装heroku的django支持工具
$ pip install django-toolbelt

2. 修改Procfile配置文件
web: gunicorn myproject.wsgi

3. 本地运行测试
$ foreman start
  </pre>
</div>

<div id="heroku2" class="step slide" data-x="190000" data-y="50000" data-scale="20">
  <p class="middle">Heroku部署</p>
  <br />
  <pre class="prettyprint lang-shell" style="border: 0px;">
4. 设置项目settings.py
import os
import dj_database_url

DATABASES['default'] =  dj_database_url.config()
SECURE_PROXY_SSL_HEADER = (
    'HTTP_X_FORWARDED_PROTO',
    'https',
)
ALLOWED_HOSTS = ['*']
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
STATIC_ROOT = 'staticfiles'
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    os.path.join(BASE_DIR, 'static'),
)
  </pre>
</div>
<div id="heroku3" class="step slide" data-x="210000" data-y="50000" data-scale="20">
  <p class="middle">Heroku部署</p>
  <br />
  <pre class="prettyprint lang-shell" style="border: 0px;">
5. deploy至heroku平台
$ heroku create
$ git push heroku master

6. 同步数据库
$ heroku run python manage.py syncdb
$ heroku run python manage.py migrate
  </pre>
</div>

<div id="dotcloud1" class="step slide" data-x="170000" data-y="65000" data-scale="20">
  <p class="middle">Dotcloud部署</p>
  <br />
  <pre class="prettyprint lang-shell" style="border: 0px;">
1. 编辑配置文件dotcloud.yml
www:
  type: python
db:
  type: postgresql

2. 创建dotcloud应用
$ dotcloud create myproject
$ dotcloud push
$ dotcloud run db -- psql #配置数据库

3. 设置安装后自动配置脚本postinstall
#!/bin/sh
python createdb.py
python manage.py syncdb --noinput
python manage.py migrate
  </pre>
</div>

<div id="dotcloud2" class="step slide" data-x="190000" data-y="65000" data-scale="20">
  <p class="middle">Dotcloud部署</p>
  <br />
  <pre class="prettyprint lang-shell" style="border: 0px;">
4. 配置settings.py文件
import json
with open('/home/dotcloud/environment.json') as f:
    env = json.load(f)

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'happydb',
        'USER': env['DOTCLOUD_DB_SQL_LOGIN'],
        'PASSWORD': env['DOTCLOUD_DB_SQL_PASSWORD'],
        'HOST': env['DOTCLOUD_DB_SQL_HOST'],
        'PORT': int(env['DOTCLOUD_DB_SQL_PORT']),
    }
}
  </pre>
</div>

<div id="appfog1" class="step slide" data-x="170000" data-y="80000" data-scale="20">
  <p class="middle">AppFog部署</p>
  <br />
<pre class="prettyprint lang-shell" style="border: 0px;">
1. 进入Appfog管理台设置，获取数据库等参数，设置环境变量

2. 根据配置修改settings.py，上传同步代码
$ af update
</pre>
</div>

<div id="vps1" class="step slide" data-x="170000" data-y="95000" data-scale="20">
  <p class="middle">VPS部署</p>
  <br /><br />
  <p>1. 安装Linux发行版，比如Ubuntu</p><br />
  <p>2. 配置openssl，防火墙等</p><br />
  <p>3. apt-get install 安装编译依赖库，其他必须软件</p><br />
  <p>4. 安装web服务器nginx，数据库PostgreSQL</p><br />
  <p>5. 安装gunicorn, memecache, redis, celery等</p><br />
  <p>6. 创建虚拟python运行环境，克隆代码库，运行项目</p>
</div>
<div id="vps2" class="step slide" data-x="190000" data-y="95000" data-scale="20">
  <p class="middle">VPS硬件配置</p>
  <br /><br /><br />
  <p class="small">单核CPU</p><br />
  <p class="small">512M内存</p><br />
  <p class="small">20G Raid10 硬盘</p><br />
  <p class="small">10M专线，1000G流量</p>
</div>
<div id="vps3" class="step slide" data-x="210000" data-y="95000" data-scale="20">
  <p class="middle">VPS性能优化与测试</p>
  <br />
  <pre># ab -n 1000 -c 10 http://127.0.0.1:8000/</pre>
  <br />
  <div id="performence"></div>
</div>
<div id="vps4" class="step slide" data-x="230000" data-y="95000" data-scale="20">
  <p class="middle">建立实例</p>
  <br />
  <img src="img/hzcdclabs.png" style="margin-left:-55px" width="890px" />
  <p style="text-align:center">网站地图</p>
</div>
<div id="vps5" class="step slide" data-x="250000" data-y="95000" data-scale="20">
  <p class="middle">建立实例</p>
  <img src="img/page.jpg" style="margin-left:-55px; margin-top: 15px" height="605px" width="890px" />
</div>

<div id="result" class="step slide" data-x="150000" data-y="110000" data-scale="20">
  <p class="middle">总结</p>
</div>

<div id="own" class="step slide" data-x="150000" data-y="125000" data-scale="20">
  <p class="middle">收获与不足</p>
  <br /><br />
  <div style="text-align: center"><img src="img/1.png" /></div>
</div>

<div id="future" class="step slide" data-x="150000" data-y="140000" data-scale="20">
  <p class="middle">下一步展望</p>
  <br /><br />
  <p>1. 完善当前的的应用，修改BUG，建立文档方便他人建立平台实例</p><br />
  <p>2. 丰富知识库内容，进一步融入到实际工作中，宣传并推广网站</p><br />
  <p>3. 建立PFGE等数据为基础的区域化分子分型数据库</p><br />
  <p>4. 同步化galaxy数据，提供在线的科研分析工具，特别是今后工作中很可能大量使用的测序技术。</p>
</div>

<div id="thanks" class="step slide" data-x="150000" data-y="155000" data-scale="20">
  <p class="middle">致谢</p>
  <br />
  <p>感谢杭州市科技局将本课题列入杭州市科技发展计划（引导计划）项目。</p><br />
  <p>感谢杭州市科技局农村与社会发展处领导、杭州市卫生局科教处领导、杭州市疾病预防控制中心领导和中心科教科对本课题的大力支持。</p><br />
  <p>感谢本课题组成员为完成本课题所做的贡献。</p><br />
  <p>感谢杭州市疾病预防控制中心微生物检验科各位同事的大力支持和配合。感谢杭州市疾病预防控制中心性病与艾滋病防治所给予的支持</p><br />
  <p style="padding: 30px 0px 0px 600px">俞 骅<br />2013-11-27</p>
</div>

<!-- Overview -->
<div id="overview" class="step" data-x="200000" data-y="300000" data-scale="1000"></div>

</div>


<script src="js/impress.js"></script>
<script>
$(function() {
    impress().init();
    $('.hidden').css('opacity',0);
    window.addEventListener('impress:stepenter', function() {
        $('.hidden.active').animate({'opacity': 1});
    });
    window.addEventListener('impress:stepleave', function() {
        $('.hidden.past').animate({'opacity': 0});
    });

    //frontend
    window.addEventListener('impress:stepenter', function() {
      $('#frontend.animar.active ul li').addClass('animated bounceIn');
    });
    window.addEventListener('impress:stepenter', function() {
      $('#frontend.animar.past ul li').removeClass('animated bounceIn');
    });
    window.addEventListener('impress:stepenter', function() {
      $('#frontend.animar.future ul li').removeClass('animated bounceIn');
    });

    //backend
    window.addEventListener('impress:stepenter', function() {
      $('#backend.animar.active ul li').addClass('animated bounceIn');
    });
    window.addEventListener('impress:stepenter', function() {
      $('#backend.animar.past ul li').removeClass('animated bounceIn');
    });
    window.addEventListener('impress:stepenter', function() {
      $('#backend.animar.future ul li').removeClass('animated bounceIn');
    });

    //chart
    window.addEventListener('click', function () {
        $('#performence').highcharts({
            chart: {
                type: 'bar'
            },
            title: {
                text: '不同页面使用优化前后的req/s值'
            },
            xAxis: {
                categories: ['Page1', 'page2', 'Page3', 'Page4'],
                title: {
                    text: null
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'req/s',
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },
            tooltip: {
                valueSuffix: ' req/s'
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: '默认',
                data: [10.15, 9.89, 4.74, 9.65]
            }, {
                name: '数据库优化',
                data: [14.10, 13.65, 7.29, 11.98]
            }, {
                name: '缓存设置',
                data: [37.29, 24.05, 19.80, 29.03]
            }]
        });
    });
});
</script>
</body>
</html>
